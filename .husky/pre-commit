#!/bin/sh

echo "ğŸ”’ Checking lockfile..."
pnpm install --frozen-lockfile || (echo "âŒ Lockfile is out of date. Run 'pnpm install' to update it." && exit 1)

echo "ğŸ” Running linter..."
pnpm lint || (echo "âŒ Lint failed" && exit 1)

echo "ğŸ”¨ Building project..."
pnpm build || (echo "âŒ Build failed" && exit 1)

echo "ğŸ§ª Running tests..."
pnpm test || (echo "âŒ Tests failed" && exit 1)

echo "ğŸ“ Running lint-staged for changed files..."
npx lint-staged

echo "âœ… Pre-commit checks passed!"